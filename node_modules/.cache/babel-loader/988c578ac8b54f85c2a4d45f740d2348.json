{"remainingRequest":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\src\\views\\Searching.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\src\\views\\Searching.vue","mtime":1567521216540},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\LPANGFEI\\\\Desktop\\\\Vue\\\\vue-book\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { setTimeout } from \"timers\";\nimport BookHeader from \"../components/BookHeader\";\nexport default {\n  name: \"Searching\",\n  data: function data() {\n    return {\n      isLoading: true,\n      dataSource: [],\n      hotWorlds: [],\n      searchHotWords: [],\n      hotRecommends: [],\n      fuzzySearchs: []\n    };\n  },\n  components: {\n    BookHeader: BookHeader\n  },\n  methods: {\n    // 自动补全\n    getAutoData: function () {\n      var _getAutoData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(value) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$http(\"/book/auto-complete?query=\" + value);\n\n              case 2:\n                res = _context.sent;\n                res = res.data;\n                this.hotWorlds = res.keywords;\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getAutoData(_x) {\n        return _getAutoData.apply(this, arguments);\n      }\n\n      return getAutoData;\n    }(),\n    // 热门推荐\n    getHotWords: function () {\n      var _getHotWords = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _this = this;\n\n        var res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.$http(\"/book/search-hotwords\");\n\n              case 2:\n                res = _context2.sent;\n                res = res.data;\n                this.searchHotWords = res.searchHotWords;\n                this.$nextTick(function () {\n                  _this.replace();\n                });\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getHotWords() {\n        return _getHotWords.apply(this, arguments);\n      }\n\n      return getHotWords;\n    }(),\n    replace: function replace() {\n      var _this2 = this;\n\n      if (this.searchHotWords) {\n        this.hotRecommends = [];\n\n        for (var i = 0; i < 10; i++) {\n          var ran = ~~(Math.random() * 100);\n          this.hotRecommends.push(this.searchHotWords[ran]);\n        }\n      }\n\n      this.$nextTick(function () {\n        _this2.initLoading();\n      });\n    },\n    initLoading: function initLoading() {\n      var _this3 = this;\n\n      setTimeout(function () {\n        _this3.isLoading = false;\n      }, 1000);\n    },\n    handleSearch: function handleSearch(value) {\n      this.getAutoData(value);\n      this.dataSource = this.hotWorlds;\n    },\n    onSelect: function onSelect(title) {\n      console.log(\"onSelect\", title);\n      this.$router.push({\n        path: \"/bookmore\",\n        query: {\n          title: title,\n          type: \"search\"\n        }\n      });\n    },\n    goToDetail: function goToDetail(title) {\n      this.$router.push({\n        path: \"/bookmore\",\n        query: {\n          title: title,\n          type: \"search\"\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.getHotWords();\n  }\n};",{"version":3,"sources":["Searching.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <section class=\"searching\">\r\n        <Spin v-show=\"isLoading\" />\r\n        <BookHeader :title=\"'搜索'\" />\r\n        <div class=\"container\">\r\n            <!-- 搜索框 -->\r\n            <div class=\"search-bar\">\r\n                <a-auto-complete\r\n                    allowClear\r\n                    :dataSource=\"hotWorlds\"\r\n                    style=\"width: 100%\"\r\n                    @select=\"onSelect\"\r\n                    @search=\"handleSearch\"\r\n                    placeholder=\"请输入搜索内容\"\r\n                    ref=\"search\"\r\n                />\r\n            </div>\r\n            <!-- 热门推荐 -->\r\n            <div class=\"hot-recommend\">\r\n                <div class=\"title\">\r\n                    <span>热门推荐</span>\r\n                    <span class=\"tip\" @click=\"replace\">\r\n                        <i>换一批</i>\r\n                        <i class=\"icon\"></i>\r\n                    </span>\r\n                </div>\r\n                <div\r\n                    class=\"content\"\r\n                    v-for=\"(hotRecommend, index) in hotRecommends\"\r\n                    :key=\"index\"\r\n                    @click=\"goToDetail(hotRecommend.word)\"\r\n                >{{hotRecommend.word}}</div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\nimport { setTimeout } from \"timers\";\r\nimport BookHeader from \"../components/BookHeader\";\r\n\r\nexport default {\r\n    name: \"Searching\",\r\n    data: () => ({\r\n        isLoading: true,\r\n        dataSource: [],\r\n        hotWorlds: [],\r\n        searchHotWords: [],\r\n        hotRecommends: [],\r\n        fuzzySearchs: []\r\n    }),\r\n    components: {\r\n        BookHeader\r\n    },\r\n    methods: {\r\n        // 自动补全\r\n        async getAutoData(value) {\r\n            let res = await this.$http(\"/book/auto-complete?query=\" + value);\r\n            res = res.data;\r\n            this.hotWorlds = res.keywords;\r\n        },\r\n        // 热门推荐\r\n        async getHotWords() {\r\n            let res = await this.$http(\"/book/search-hotwords\");\r\n            res = res.data;\r\n            this.searchHotWords = res.searchHotWords;\r\n            this.$nextTick(() => {\r\n                this.replace();\r\n            });\r\n        },\r\n        replace() {\r\n            if (this.searchHotWords) {\r\n                this.hotRecommends = [];\r\n                for (var i = 0; i < 10; i++) {\r\n                    let ran = ~~(Math.random() * 100);\r\n                    this.hotRecommends.push(this.searchHotWords[ran]);\r\n                }\r\n            }\r\n            this.$nextTick(() => {\r\n                this.initLoading();\r\n            });\r\n        },\r\n        initLoading() {\r\n            setTimeout(() => {\r\n                this.isLoading = false;\r\n            }, 1000);\r\n        },\r\n        handleSearch(value) {\r\n            this.getAutoData(value);\r\n            this.dataSource = this.hotWorlds;\r\n        },\r\n        onSelect(title) {\r\n            console.log(\"onSelect\", title);\r\n            this.$router.push({\r\n                path: \"/bookmore\",\r\n                query: {\r\n                    title,\r\n                    type: \"search\"\r\n                }\r\n            });\r\n        },\r\n        goToDetail(title) {\r\n            this.$router.push({\r\n                path: \"/bookmore\",\r\n                query: {\r\n                    title,\r\n                    type: \"search\"\r\n                }\r\n            });\r\n        }\r\n    },\r\n    created() {\r\n        this.getHotWords();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.searching {\r\n    width: 100%;\r\n    height: 100vh;\r\n    .container {\r\n        width: 90%;\r\n        margin: 0 auto;\r\n    }\r\n}\r\n.search-bar {\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-top: 10px;\r\n    margin-bottom: 20px;\r\n    width: 100%;\r\n    .icon {\r\n        position: absolute;\r\n        left: 10px;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        width: 20px;\r\n        height: 20px;\r\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkBAMAAACCzIhnAAAAG1BMVEVHcEyZmZmZmZmampqampqZmZmZmZmZmZmZmZm+x9fIAAAACHRSTlMA5XQSKE7CmQNx6RMAAAH+SURBVFjD7Vc9U8JAED0gQKsywpUIo6YERmcscXSUEnUYKUEtKMXRIe0pSfZnSxKIIbfZu0MLi7yKLLx7+3XZhbEcOXL8AtbplIv6W1+f8cghwocmoXQEMQ46pgyATx3KHWzhUM2oQgqvSrdmaYqnCqcLEmqKgqzT2zi+OrufR59FX0NEvEdPt1xDJoqkvXnsRdFQjGL4k5cfw40yaWOpenZgWar8akq6QuFXqkVs6RQ5X03kmOyc2Vh6ZmRzcizUARVMGXU79GxINLGQmrDEicoUVt/5stlZmfcyKAO8agOimDZ+XIFImYM7XcX9jSswxBPpEWVBrpNFFCagIBe9RFAgmwIExcROq4i/C3+HJDv4/SsSpQwaZiKbK0TDjPEre7EyuxmUjO+Ck74yKBU8zhnuL3Fly9RbKeyMCaYNmTPGwXJjEzmOrmy6/hb9Uq4gb8YuENGvT9yejdHsJOZYEAw8Jy3hgPFVc08k8lzmqskXegZ+7FrJUa8Y463NJd5NhsphCf5D8HDubEa/S8nY6x/VF4tpYl3QkEnDNViUAPaVMlZq7/GuuVKmyJMM0WSXShnWS3BEe7MKkTKsF/vmhduMhgyzTsKDxVM/sXG5quVv1GqN4r7RkUEXO9eEsrvM0lzGY8YyghnLGFICGZ8Zy9RM/wXNGx2WI0eO/4pvXVtwjS2EstwAAAAASUVORK5CYII=);\r\n        background-repeat: no-repeat;\r\n        background-size: contain;\r\n        z-index: 10;\r\n    }\r\n}\r\n.hot-recommend {\r\n    width: 100%;\r\n    .title {\r\n        position: relative;\r\n        width: 100%;\r\n        height: 25px;\r\n        margin-bottom: 10px;\r\n        font-size: 18px;\r\n        color: #6b6b6b;\r\n        font-style: normal;\r\n        .tip {\r\n            position: absolute;\r\n            right: 0;\r\n            bottom: 0;\r\n            font-size: 10px;\r\n            color: #bababf;\r\n            font-style: normal;\r\n            .icon {\r\n                display: inline-block;\r\n                width: 14px;\r\n                height: 14px;\r\n                vertical-align: middle;\r\n                background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAnCAMAAABUv8o5AAAAjVBMVEX////8/P77+/34+Pr6+vz29viUlJaFhYf09PaIiIqPj5GKiozy8vSMjI6RkZPs7O7o6Ori4uTKysynp6mampyXl5nCwsTv7/Hl5ee7u72wsLKhoaOCgoTb293R0dPGxsienqDf3+HV1de4uLqtra+kpKbq6uy/v8G0tLapqaucnJ5/f4HNzc/W1ti9vb9Qf31QAAACK0lEQVQ4y+WU6bKbMAyFJeMF25gdQoDse3Lb93+8yr6X0LnJtNPf1QwMjD9LOgdh+A+Dicjf6RICAQEQ8T0ZcQAeVlH4Z2DsOxLTOoFZvFhQMgIj9g6jJZGt2qpJ5eladpy2eBxfMLHvG6eNVkrL4yZjxL1irLvUajT3YdjWRptmWVA+9oKJjVRpddjsimLfHuVDXgvmNX2LclDpdb2AiArFxc+7lsuMdMwApWawatx4OAt65ZzkLcrmUZcQ4YwhcuAHl95W7MvTCDBbprbKGYhZIiaQG1X/CM6Dx4gvbm5bwIz5XqAcbUV9UV66eZjhUtlLjr8lQ8ZutjlwSBh7YrCWuj/DjPmlRt4/Pr2cikJ3UkMC8dNXRrtTU+8gxCSB5ce03s1SYwQBcmxyakzg0xDrFPmdniYsoc1x5eQKWJidiFH+bONS87DSVhMmCAOSVYbxYV/t5SdnjVHyx4QFbXtlr3kY2TgKI5x81No43c9KOVKRrduuI7/lUxWLklY+dF/MGFWNcGNcX/gswGPBff3zUg4rwAlDwmI4D9r2+8XXR026XEBXrpMnxsJXAP5RjerUrrwlLG9vxx3wRPC5/yCBfFjXo5HDst20h8qq+xp4GKuXX2t/dKOWJpWpVrIS0ac33ynGu3ZrtNJW6+bSkax3GGCEmJV97ez2souBIbxiM/yXd2/WdGhw/qejxo+utzcOs/Q+iAnHQTKdMO8DQzYUVD7hfgop4F/jF16jG+TevfgUAAAAAElFTkSuQmCC);\r\n                background-repeat: no-repeat;\r\n                background-size: contain;\r\n            }\r\n        }\r\n    }\r\n    .content {\r\n        width: 100%;\r\n        height: 40px;\r\n        font-size: 16px;\r\n        line-height: 40px;\r\n        border-bottom: 1px solid #eee;\r\n    }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}