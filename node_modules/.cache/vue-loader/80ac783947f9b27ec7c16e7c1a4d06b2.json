{"remainingRequest":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\src\\views\\BookDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\src\\views\\BookDetail.vue","mtime":1567171509891},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\LPANGFEI\\Desktop\\Vue\\vue-book\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport BScroll from \"better-scroll\";\r\nimport { setTimeout } from \"timers\";\r\nexport default {\r\n    name: \"BookDetail\",\r\n    data: () => ({\r\n        isLoading: true,\r\n        bScroll: null,\r\n        title: \"\",\r\n        detail: [],\r\n        active: false\r\n    }),\r\n    methods: {\r\n        async getBookDetail(id) {\r\n            let res = await this.$http(\"/book/\" + id);\r\n            res = res.data;\r\n            this.detail = res;\r\n            console.log(this.detail);\r\n            this.$nextTick(() => {\r\n                this.initLoading();\r\n            });\r\n        },\r\n        initLoading() {\r\n            setTimeout(() => {\r\n                this.isLoading = false;\r\n            }, 1000);\r\n        },\r\n        initBScroll() {\r\n            if (this.bScroll) {\r\n                this.bScroll.refresh();\r\n            } else {\r\n                this.bScroll = new BScroll(this.$refs.wrapper, {\r\n                    probeType: 3,\r\n                    click: true\r\n                });\r\n            }\r\n        },\r\n        showText() {\r\n            this.active = !this.active;\r\n        }\r\n    },\r\n    created() {\r\n        let { title, id } = this.$route.query;\r\n        console.log(title, id);\r\n        this.title = title;\r\n        this.getBookDetail(id);\r\n    },\r\n    mounted() {\r\n        this.initBScroll();\r\n    },\r\n    beforeUpdate() {\r\n        // this.bScroll.destroy();\r\n        this.bScroll = null;\r\n    }\r\n};\r\n",{"version":3,"sources":["BookDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookDetail.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <section class=\"book-detail\">\r\n        <Spin v-show=\"isLoading\" />\r\n        <BookHeader :title=\"'书籍详情'\" />\r\n        <div class=\"wrapper\" ref=\"wrapper\" v-if=\"detail\">\r\n            <div class=\"container\">\r\n                <!-- 头部 -->\r\n                <div class=\"cover\">\r\n                    <img v-lazy=\"'//statics.zhuishushenqi.com'+detail.cover\" />\r\n                    <div class=\"desc\">\r\n                        <p class=\"title\">{{detail.title}}</p>\r\n                        <p class=\"msg\">\r\n                            <span class=\"author\">{{detail.author}}&nbsp;</span>\r\n                            |\r\n                            <span>&nbsp;{{detail.cat}}&nbsp;</span>\r\n                        </p>\r\n                        <p class=\"count\">\r\n                            <span>章节数：{{detail.chaptersCount}}&nbsp;</span>\r\n                            |\r\n                            <span>&nbsp;{{detail.wordCount | changeNumber}}字</span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <!-- 按钮 -->\r\n                <div class=\"btn\">\r\n                    <button class=\"join\">加入书架</button>\r\n                    <button class=\"read\">开始阅读</button>\r\n                </div>\r\n                <!-- 人气+留存 -->\r\n                <div class=\"data\">\r\n                    <div class=\"follower\">\r\n                        <p>追书总人气</p>\r\n                        <p class=\"num\">{{detail.totalFollower}}</p>\r\n                    </div>\r\n                    <div class=\"retention\">\r\n                        <p>读者保留率</p>\r\n                        <p class=\"num\">{{detail.retentionRatio}}%</p>\r\n                    </div>\r\n                    <div class=\"serialize\">\r\n                        <p>日更新字数/天</p>\r\n                        <p class=\"num\">{{detail.serializeWordCount}}</p>\r\n                    </div>\r\n                </div>\r\n                <!-- 简介 -->\r\n                <div class=\"content\" @click=\"showText\">\r\n                    <div :class=\"['text',{active}]\">\r\n                        <p>{{detail.longIntro}}</p>\r\n                    </div>\r\n                    <span :class=\"['icon',{active}]\"></span>\r\n                </div>\r\n                <!-- 目录 -->\r\n                <div class=\"catalog\">\r\n                    <span class=\"num\">目录</span>\r\n                    <span class=\"text\">{{detail.lastChapter}}&nbsp;></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\nimport BScroll from \"better-scroll\";\r\nimport { setTimeout } from \"timers\";\r\nexport default {\r\n    name: \"BookDetail\",\r\n    data: () => ({\r\n        isLoading: true,\r\n        bScroll: null,\r\n        title: \"\",\r\n        detail: [],\r\n        active: false\r\n    }),\r\n    methods: {\r\n        async getBookDetail(id) {\r\n            let res = await this.$http(\"/book/\" + id);\r\n            res = res.data;\r\n            this.detail = res;\r\n            console.log(this.detail);\r\n            this.$nextTick(() => {\r\n                this.initLoading();\r\n            });\r\n        },\r\n        initLoading() {\r\n            setTimeout(() => {\r\n                this.isLoading = false;\r\n            }, 1000);\r\n        },\r\n        initBScroll() {\r\n            if (this.bScroll) {\r\n                this.bScroll.refresh();\r\n            } else {\r\n                this.bScroll = new BScroll(this.$refs.wrapper, {\r\n                    probeType: 3,\r\n                    click: true\r\n                });\r\n            }\r\n        },\r\n        showText() {\r\n            this.active = !this.active;\r\n        }\r\n    },\r\n    created() {\r\n        let { title, id } = this.$route.query;\r\n        console.log(title, id);\r\n        this.title = title;\r\n        this.getBookDetail(id);\r\n    },\r\n    mounted() {\r\n        this.initBScroll();\r\n    },\r\n    beforeUpdate() {\r\n        // this.bScroll.destroy();\r\n        this.bScroll = null;\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.book-detail {\r\n    width: 100%;\r\n    .wrapper {\r\n        width: 100%;\r\n        height: 100vh;\r\n        overflow: hidden;\r\n        .container {\r\n            width: 100%;\r\n            padding: 0 10px;\r\n        }\r\n    }\r\n}\r\n.cover {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-content: center;\r\n    width: 100%;\r\n    height: 100px;\r\n    padding: 10px 0;\r\n    img {\r\n        flex: 0 0 60px;\r\n        display: block;\r\n        width: 60px;\r\n        height: 100%;\r\n    }\r\n    .desc {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        flex: 1;\r\n        width: 100%;\r\n        padding-left: 10px;\r\n        p {\r\n            font-size: 12px;\r\n            line-height: 25px;\r\n            color: #999;\r\n        }\r\n        .title {\r\n            height: 25px;\r\n            font-size: 16px;\r\n            font-weight: 400;\r\n            color: #222;\r\n            white-space: nowrap;\r\n            text-overflow: ellipsis;\r\n            overflow: hidden;\r\n        }\r\n        .msg {\r\n            height: 25px;\r\n            .author {\r\n                color: #b93321;\r\n            }\r\n        }\r\n    }\r\n}\r\n.btn {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 60px;\r\n    margin-top: 10px;\r\n    padding-bottom: 20px;\r\n    border-bottom: 1px solid #eee;\r\n    button {\r\n        width: 45%;\r\n        height: 40px;\r\n        font-size: 20px;\r\n        outline: none;\r\n        border-width: 1px;\r\n        border-style: solid;\r\n        border-color: #b93321;\r\n        border-radius: 2px;\r\n        background-color: #fff;\r\n    }\r\n    .join {\r\n        color: #b93321;\r\n    }\r\n    .read {\r\n        color: #fff;\r\n        background-color: #b93321;\r\n    }\r\n}\r\n.data {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 80px;\r\n    padding: 20px 0;\r\n    border-bottom: 1px solid #eee;\r\n    div {\r\n        width: 33.33%;\r\n        font-size: 12px;\r\n        line-height: 20px;\r\n        text-align: center;\r\n        color: #999;\r\n        .num {\r\n            margin-top: 4px;\r\n            font-size: 16px;\r\n            color: #222;\r\n        }\r\n    }\r\n}\r\n.content {\r\n    position: relative;\r\n    width: 100%;\r\n    padding: 20px 0;\r\n    border-bottom: 1px solid #eee;\r\n    .text {\r\n        -webkit-line-clamp: 4;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        display: -webkit-box;\r\n        -webkit-box-orient: vertical;\r\n        word-wrap: break-word;\r\n        white-space: normal;\r\n        font-size: 16px;\r\n        text-indent: 2em;\r\n        color: #222;\r\n        &.active {\r\n            -webkit-line-clamp: 100;\r\n            overflow: inherit;\r\n        }\r\n    }\r\n    .icon {\r\n        position: absolute;\r\n        bottom: 16px;\r\n        right: 0;\r\n        z-index: 3;\r\n        width: 20px;\r\n        height: 20px;\r\n        background-position: 50%;\r\n        background-repeat: no-repeat;\r\n        background-size: 12px auto;\r\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAQAAAAZZWZbAAAAkElEQVR4AY2RtQEDMQxFX+D4RsgA6cN4XGr/cQJyEzD9yvCeZIAVWxbEJKNhDQ3CiUUE3iE0UNAjnFniS674nVQnqlw8iiHuJN/+hQRbzBluJP8tryQWfLAXy2j/61Aa3H7clOb7pJSMFtyipABUip/9T55yR2hIqZnifihRpVX8aMGtyg1BODAnMglHdnb8CYQbEwGgBxiKAAAAAElFTkSuQmCC);\r\n        &.active {\r\n            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAANCAQAAAAZZWZbAAAAlElEQVR4AY2ShQ1CMRBA33efgSgD4B/3aPdfhwsO1Vdvz1OMZCwYExNIzhYlbUocJr5DybjKPPOrFHfxLRndXWVO7Bbfo9iQIdBykdOCBAslBxRrMgS/yl2cFRnfNHeVnkQXP97FU/6pOcvL8vel4nS/NEdbc/oxdr/Q3eoGV2Qvl3piusrxWRCPuJ4lg+BfU7JneAOq9xL9utncPAAAAABJRU5ErkJggg==);\r\n        }\r\n    }\r\n}\r\n.catalog {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    padding: 20px 0;\r\n    border-bottom: 1px solid #eee;\r\n    font-size: 14px;\r\n    color: #333;\r\n    .text {\r\n        font-size: 12px;\r\n        color: #999;\r\n    }\r\n}\r\n</style>\r\n"]}]}